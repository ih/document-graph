<template name="layout">
	<!-- TODO make the navbar a component -->
	<div class="navbar navbar-default">
		<div class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" href="#">Document Graph</a>
			</div>
			<div class="collapse navbar-collapse">
				{{#if currentUser}}
				{{> navbarSearchForm}}
				<button class="btn btn-default navbar-btn create-node">Create Node</button>
				{{#if isSelectionMade}}
				<button class="btn btn-primary navbar-btn create-linked-node">Create Linked Node</button>
				{{#if isLinkMode}}
				<button class="btn btn-primary navbar-btn link {{validCell}}">Link</button>
				{{else}}
				<button class="btn btn-primary navbar-btn link-existing-node">Link To Existing Node</button>
				{{/if}}
				{{/if}}
				{{> navbarActiveTags}}
				{{/if}}
				<ul class="nav navbar-nav navbar-right">
					{{> loginButtons align="right"}}
				</ul>
			</div>
		</div>
	</div>
	<div class="container-fluid">
		{{#if currentUser}}
		<div class="row">
			<div class="col-md-1">
				{{> nodeListPanel direction='to'}}
			</div>
			<div id="main-view" class="col-md-10">
				{{> mondrian}}
			</div>
			<div class="col-md-1">
				{{> nodeListPanel direction='from'}}
			</div>
		</div>

		{{else}}
		Please log in
		{{/if}}
	</div>

</template>

