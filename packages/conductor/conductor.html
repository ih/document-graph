<template name="layout">
	<!-- TODO make the navbar a component -->
	<div class="navbar navbar-default">
		<div class="container-fluid">
			<div class="navbar-header">
				<a class="navbar-brand" href="#">Document Graph</a>
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
			</div>
			<div class="collapse navbar-collapse">
				{{#if currentUser}}
				{{> navbarSearchForm}}
				<form class="navbar-form navbar-left">
					<!--putting these in a form seems to prevent overflow of signin, but why? -->
					<button class="toggle-selections btn btn-default">
						{{#if isShowingSelections}}
						<span class="glyphicon glyphicon-eye-open"></span>
						{{else}}
						<span class="glyphicon glyphicon-eye-close"></span>
						{{/if}}
					</button>
					<button class="btn btn-default create-node">Create Node</button>
					{{#if isSelectionMade}}
					<button class="btn btn-primary create-linked-node">Create Linked Node</button>
					{{#if isLinkMode}}
					<button class="btn btn-primary link {{validCell}}">Link</button>
					{{else}}
					<button class="btn btn-primary link-existing-node">Link To Existing Node</button>
					{{/if}}
					{{/if}}
				</form>
				<form class="navbar-form navbar-left">
					{{> navbarActiveLabels}}
				</form>
				{{/if}}
				<ul class="nav navbar-nav navbar-right">
					{{> loginButtons align="right"}}
				</ul>
			</div>
		</div>
	</div>
	<div class="container-fluid document-graph">
		{{#if currentUser}}
		<div class="row">
			<div class="{{panelWidth 'to'}}">
				{{> nodeListPanel direction='to'}}
			</div>
			<div id="main-view" class="{{mainViewWidth}}">
				{{> mondrian}}
			</div>
			<div class="{{panelWidth 'from'}}">
				{{> nodeListPanel direction='from'}}
			</div>
		</div>

		{{else}}
		Please log in
		{{/if}}
	</div>

</template>

